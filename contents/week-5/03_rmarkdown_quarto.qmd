---
title: "R Markdown and Quarto document"
engine: knitr
---

R Markdown is an authoring format for data science and analytics.  An R script file which only contains code and comments. An R Markdown file contains: 
    
1. code chunks
2. text/narrative 
3. meta data (tells it how to render the output)

R Markdown can be used to create high-quality, fully reproducible, shareable and interactive reports.

## What does R Markdown do?

When you *knit* or *render* your R Markdown file, it will generate an output file in the format of your choice (e.g. HTML, Word, PDF). It will run the code embedded in the R Markdown file, dynamically updating any tables, plots or results that you want to create. You can then share your output file with colleagues.

## R Markdown workflow

The following shows the basic workflow we'll follow when using R Markdown:

1. Open a .Rmd File in RStudio using *File -> New File -> R Markdown*
2. Embed your code in code chunks.
3. Write text and add tables, figures, images, and citations as necessary.
4. Set the output format and options in the YAML header.
5. Save and render (knit) the document.
6. Share your work!
    
## Getting started

You will first need to download and install the `rmarkdown` and `knitr` packages. You don't need to load these packages in the R Markdown file, they load automatically for you! If you want to render your files to PDF format, you will also need to download and install the `tinytex` package.

### Open an R Markdown file

[[add image]]

### Open a new document

[[add image]]

### The R Markdown file

### Changing the display location

[[add image]]

### Rendering (knitting)

[[add image]]

### The knitted file

[[add image]]


## What is YAML?

Every R Markdown document starts with a YAML header. YAML settings customises how the output file is rendered. You can set lots of options in the YAML heading, e.g. themes, default figure sizes, default output type (HTML, PDF, Word), include table of contents, etc.

### Default YAML

The default YAML header in the template file is:

```yaml
---
title: "Untitled"
output: html_document
---
```

The rendered document will be in HTML format. The rendered HTML file will have a title called "Untitled".

**Exercise:** In the template file, change the title to "My first document". Knit the file and see what happens!


### Adding an author and date

Adding an author and today's date:
```yaml
---
title: "My first document"
author: "Norma"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---
```

**Exercise:** Add an author and date to the template file. Re-knit the file and see what happens!

### Adding a table of contents

To add a table of contents we include a sub-heading in the output section:

```yaml
---
title: "My first document"
author: "Norma"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
---
```

**NOTE**: the `html_document` has moved to the next line with a `:` at the end. This has tabbed in by one. The toc must be tabbed in twice. 

**Exercise:** Add a table of contents to the template file. Re-knit and identify what has changed.

### Adding a floating table of contents

Specifying the `toc_float` option to float the table of contents to the left of the document (open in the browser for best viewing). This looks like:

```yaml
---
title: "My first document"
author: "Norma"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: true
---
```

### Section numbering

Next let's number the document sections. The YAML will be:

```yaml
---
title: "My first document"
author: "Norma"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: true
    number_sections: true
---
```

When using the `number_sections` option, you should use HEADER 1 headers, i.e. use **# Header name** in the document. This is because HEADER 2 headers, i.e. **## Header name**, will be numbered with decimal points. 

**Exercise:** Try adding section numbers to the template file, and re-knit the file. Notice how the section numbers appear.  

Next change the headers to HEADER 1 headers (delete one #) and re-knit. What is the difference in the output?

### Themes

Themes change how the rendered file will be styled. There are many themes including: default, bootstrap, cerulean, cosmo, darkly, flatly, journal, lumen, paper, readable, sandstone, simplex, spacelab, united, and yeti.

Let's try some of these to see what they look like!

Let's choose the flatly theme and use it in the template file:

```yaml
---
title: "My first document"
author: "Norma"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: true
    number_sections: true
    theme: flatly
---
```

The font, colour, link colour, etc. are all changed!

**Exercise:** Try some of the other themes and pick your favourite.

## Including text

Text or narrative is a fundamental part of any R Markdown document. There are several components that we can modify easily to change how the file is structured. These include bolding text, italicising text, (bulleted) lists, sectioning, etc.

### Section headers

```markdown
# HEADER 1

## HEADER 2

### HEADER 3

#### HEADER 4

##### HEADER 5

###### HEADER 6
```

### Bolding and italicising

```markdown
**Data analytics** is the process 
of exploring, 
visualising and 
modelling *Big Data*.
```

### Lists - bulleted

```markdown
Data analytics includes:

- data cleaning, 
- data visualisation, 
- data summary, 
- data modelling.

```

### Lists - numbered

```markdown
Data analytics includes:

1. data cleaning, 
2. data visualisation, 
3. data summary, 
4. data modelling.

```

### Sub-lists

```markdown
Data analytics includes:

1. data cleaning, 
2. data visualisation,
  - categorical
  - quantitative
3. data summary, 
4. data modelling.

```

### Including images

```markdown
Data analytics icon
![](Data_analytics_image.jpeg)
```

### Links

```markdown

Learn more about data 
analytics [here](https://bit.ly/3IlY9zv).

![](Data_analytics_image.jpeg)

```

### Other ideas

White space (tabs) matter in R Markdown! You can create tables, include bibliographies and write mathematical expressions using LaTeX code.


### Including code chunks

An R code chunk can be added in several ways:
    
1. Cmd + Option + i (MacOS) or Ctrl + Alt + i (Windows)  
2. Clicking *Code -> Insert chunk* in RStudio IDE  
3. Using the following:
````
```{r}`r ''`
```
````

````
```{r}`r ''`
credit_df_clean %>% 
  count(default)
```
````

Code is in the output file
Results are in the output file


````
```{r}`r ''`
credit_df_clean %>% 
  ggplot(aes(x = education, fill = education)) +
  geom_bar() + 
  theme_bw() +
  theme(legend.position = "none")
```
````

### Code chunk options - eval

````
```{r, eval = FALSE}`r ''`
credit_df_clean %>% 
  count(default)
```
````


Code is in the output file
No results are in the output file


````
```{r, eval = FALSE}`r ''`
credit_df_clean %>% 
  ggplot(aes(x = education, fill = education)) +
  geom_bar() + 
  theme_bw() +
  theme(legend.position = "none")
```
````

### Code chunk options - include


````
```{r, include = FALSE}`r ''`
credit_df_clean %>% 
  count(default)
```
````

No code is in the output file
No results are in the output file

````
```{r, include = FALSE}`r ''`
credit_df_clean %>% 
  ggplot(aes(x = education, fill = education)) +
  geom_bar() + 
  theme_bw() +
  theme(legend.position = "none")
```
````

### Code chunk options - echo

````
```{r, echo = FALSE}`r ''`
credit_df_clean %>% 
  count(default)
```
````

No code is in the output file
Results are in the output file

````
```{r, echo = FALSE}`r ''`
credit_df_clean %>% 
  ggplot(aes(x = education, fill = education)) +
  geom_bar() + 
  theme_bw() +
  theme(legend.position = "none")
```
````

### Other useful chunk options

There are lots of other chunk options. `fig.height`, `fig.width`, `fig.align` change the size and alignment of the outputted graph(s). Setting the `message` and `warning` options to FALSE will ensure that and warnings or messages that are printed when running a code chunk will not appear in the output file.

---

### Combining chunk options

Place between curly braces
````
```{r, option=value}`r ''`
```
````

Multiple options separated by commas
````
```{r, option1=value, option2=value}`r ''`
```
````

The *r* part is the code engine (others such as Python, C, Julia, etc possible).


### Running code chunks

Code chunks can be run:

1. on their own (click the green arrow on the top RHS of the chunk)
2. all together by knitting the file
    
NB! The Markdown environment and R Console are **separate** environments.

When you knit the Markdown file, everything is run in the that environment. If running code chunks individually (e.g. to check the code works), you are pushing the code to the R console. This means that you must load the relevant packages into the R console to avoid getting errors.

If a code chunk uses information from a previous code chunk, the previous code chunk must be run first.


### Chunk labels

Code chunks can be given labels or names that can be referred to or called from other locations in the file, e.g.
````
```{r look, echo = FALSE}`r ''`
str(credit_df_clean)
```
````

- NOTE: No comma between *r* and the label *look*. 

Chunk options are then listed (separated by commas).

No duplicate labels allowed!


### The setup chunk

````
```{r setup, include=FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE)
```
````

- A special chunk: *setup*

- Typically the first chunk in the Markdown file.

- All following chunks will use these options (i.e., sets global chunk options).

- Typically set include=FALSE.

- You should also use individual chunk options!



## Additional resources

- A short tutorial on using R Markdown is available [here](https://commonmark.org/help/tutorial/) for you to try.

- The book [R Markdown: the Definitive Guide](https://bookdown.org/yihui/rmarkdown/) lists many more.

- The [RStudio R Markdown cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf) gives a great overview of these ideas.

- The [RMarkdown reference guide](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf?_ga=2.229584860.1166261784.1645476210-1869785281.1598968492) lists lots more options!
