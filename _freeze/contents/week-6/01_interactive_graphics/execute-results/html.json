{
  "hash": "0fa1c0c96093f5c08641174edf44ce52",
  "result": {
    "markdown": "---\ntitle: \"Interactive graphics with plotly\"\nengine: knitr\n---\n\n\n<br>\nInteractive graphics enable users to explore data and gain insights more dynamically. This interactivity includes zooming, panning, hovering over data points for additional information, and selecting specific elements for deeper exploration. Nowadays, there are numerous R packages to create interactive plots. Here, we will focus on `plotly` as it is a general purposes data visualisation package and it works nicely with `ggplot2`.\n\nBefore you start, you will need to download and install the `plotly` package. We will also need the `tidyverse`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages('plotly')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(plotly)\n```\n:::\n\n\nFor this section, we will use a dataset gathering information on US States ([link](https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-08-01)). The dataset is assumed to be loaded using:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read_csv('./source/states.csv')\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.outputcode}\n# A tibble: 6 × 14\n  state postal_abbreviation capital_city largest_city admission  population_2020\n  <chr> <chr>               <chr>        <chr>        <date>               <dbl>\n1 Alab… AL                  Montgomery   Huntsville   1819-12-14         5024279\n2 Alas… AK                  Juneau       Anchorage    1959-01-03          733391\n3 Ariz… AZ                  Phoenix      Phoenix      1912-02-14         7151502\n4 Arka… AR                  Little Rock  Little Rock  1836-06-15         3011524\n5 Cali… CA                  Sacramento   Los Angeles  1850-09-09        39538223\n6 Colo… CO                  Denver       Denver       1876-08-01         5773714\n# ℹ 8 more variables: total_area_mi2 <dbl>, total_area_km2 <dbl>,\n#   land_area_mi2 <dbl>, land_area_km2 <dbl>, water_area_mi2 <dbl>,\n#   water_area_km2 <dbl>, n_representatives <dbl>, demonym <chr>\n```\n:::\n:::\n\n\n## Make a ggplot interactive\n\nMaking a `ggplot` interactive is very easy. The package `plotly` provides the function `ggplotly()` that does all the job. The function takes a `ggplot` object as input and return a `plotly` object. As it returns a `plotly` object, we can use all the formatting elements on it.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\nWe can create a simple plot using `ggplot2`:\n\n::: {.cell}\n\n```{.r .cell-code}\ngg <- ggplot(df) +\n    geom_point(\n        aes(x = population_2020, y = total_area_mi2, text = state)\n    ) +\n    xlab('Population in 2020') +\n    ylab('Total area in square miles') +\n    theme_bw()\ngg\n```\n\n::: {.cell-output-display}\n![](01_interactive_graphics_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nAnd then, make it interactive using the `ggplotly()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplotly(gg, tooltip = 'text')\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ac4aa3b5a56898be1c65\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ac4aa3b5a56898be1c65\">{\"x\":{\"data\":[{\"x\":[5024279,733391,7151502,3011524,39538223,5773714,3605944,989948,21538187,10711908,1455271,1839106,12812508,6785528,3190369,2937880,4505836,4657757,1362359,6177224,7029917,10077331,5706494,2961279,6154913,1084225,1961504,3104614,1377529,9288994,2117522,20201249,10439388,779094,11799448,3959353,4237256,13002700,1097379,5118425,886667,6910840,29145505,3271616,643077,8631393,7705281,1793716,5893718,576851],\"y\":[52420,665384,113990,53179,163695,104094,5543,2489,65758,59425,10932,83569,57914,36420,56273,82278,40408,52378,35380,12406,10554,96714,86936,48432,69707,147040,77348,110572,9349,8723,121590,54555,53819,70698,44826,69899,98379,46054,1545,32020,77116,42144,268596,84897,9616,42775,71298,24230,65496,97813],\"text\":[\"Alabama\",\"Alaska\",\"Arizona\",\"Arkansas\",\"California\",\"Colorado\",\"Connecticut\",\"Delaware\",\"Florida\",\"Georgia\",\"Hawaii\",\"Idaho\",\"Illinois\",\"Indiana\",\"Iowa\",\"Kansas\",\"Kentucky\",\"Louisiana\",\"Maine\",\"Maryland\",\"Massachusetts\",\"Michigan\",\"Minnesota\",\"Mississippi\",\"Missouri\",\"Montana\",\"Nebraska\",\"Nevada\",\"New Hampshire\",\"New Jersey\",\"New Mexico\",\"New York\",\"North Carolina\",\"North Dakota\",\"Ohio\",\"Oklahoma\",\"Oregon\",\"Pennsylvania\",\"Rhode Island\",\"South Carolina\",\"South Dakota\",\"Tennessee\",\"Texas\",\"Utah\",\"Vermont\",\"Virginia\",\"Washington\",\"West Virginia\",\"Wisconsin\",\"Wyoming\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":54.794520547945211},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1371217.6000000001,41486291.600000001],\"tickmode\":\"array\",\"ticktext\":[\"0e+00\",\"1e+07\",\"2e+07\",\"3e+07\",\"4e+07\"],\"tickvals\":[0,9999999.9999999981,20000000,30000000,40000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0e+00\",\"1e+07\",\"2e+07\",\"3e+07\",\"4e+07\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Population in 2020\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-31646.950000000004,698575.94999999995],\"tickmode\":\"array\",\"ticktext\":[\"0e+00\",\"2e+05\",\"4e+05\",\"6e+05\"],\"tickvals\":[0,200000.00000000003,400000.00000000006,600000],\"categoryorder\":\"array\",\"categoryarray\":[\"0e+00\",\"2e+05\",\"4e+05\",\"6e+05\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Total area in square miles\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"52f730b7a21c\":{\"x\":{},\"y\":{},\"text\":{},\"type\":\"scatter\"}},\"cur_data\":\"52f730b7a21c\",\"visdat\":{\"52f730b7a21c\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n:::\n\n\n## Additional resources\n\n* Plotly R [documentation](https://plotly.com/r/).\n\n* Plotly with `ggplot2` [documentation](https://plotly.com/ggplot2/).\n\n<br><br>\n\n::: {style=\"font-size: 0.875em;\"}\nBack to [week 06](/weeks/week-6.qmd) ⏎\n:::",
    "supporting": [
      "01_interactive_graphics_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}