{
  "hash": "d2276b87faeafe5def7a649ba6f35510",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Other packages\"\nengine: knitr\n---\n\n\n\n\n\n<br>\nThe `tidyverse` packages we have explored constitute the core components of the `tidyverse`. There are a couple of additional packages within the core set: `stringr` for string manipulation, `forcats` for factors, and `lubridate` for date and time operations.\n\n## The `stringr` package\n\nThe `stringr` package presents a comprehensive toolkit for string manipulation in R, streamlining a variety of text-related tasks. \n\n* To identidy specific patterns within strings, we use the function `str_detect()`. This function accepts regular expressions. It can be used to check if an email is well formatted for example. The `negate` argument is used to return `TRUE` if the patterns do not match.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemail <- \"name_surname@ul.ie\"\nstr_detect(email, \"^[a-z]*[.][a-z]*@ul.ie\", negate = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n\nThis returns `TRUE` because the email does not match the pattern (the `.` is replaced by a `_`).\n\n:::\n\n* To extract substrings with specific patterns within strings, we use the function `str_extract()`. This function also accepts regular expressions. It can be used to extract information from email for example.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemail <- \"name.surname@ul.ie\"\nstr_extract(email, \"([a-z]*).([a-z]*)@ul.ie\", group = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] \"name\"\n```\n\n\n:::\n\n```{.r .cell-code}\nstr_extract(email, \"([a-z]*).([a-z]*)@ul.ie\", group = 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] \"surname\"\n```\n\n\n:::\n:::\n\n\n\n:::\n\n* To substitute particular substrings with others, we use the function `str_replace()`. An example of usage of this function is to convert from British english to American english and the other way round. This function accepts regular expressions as well.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr_replace(\"colorful\", \"or\", \"our\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] \"colourful\"\n```\n\n\n:::\n:::\n\n\n\n:::\n\n\n## The `forcats` package\n\nThe `forcats` package focuses on the effective management and manipulation of categorical variables in R. \n\nLet's reuse the wine quality data, here:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read_csv(\n    './ressource/wine_quality.csv',\n    col_types = 'idddddddddddi'\n) |> \n    mutate(quality = as.factor(quality))\n```\n:::\n\n\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\nBy default, the `quality` factor levels are in increasing order.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x=quality, y=alcohol)) +\n  geom_boxplot() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](07_others_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n* To reorder factor levels using another variable, we use the function `fct_reorder()`.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\nWe may want to order the factors using their median values.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n    data = df,\n    aes(x=fct_reorder(quality, alcohol, .fun = median), y=alcohol)\n) +\n  geom_boxplot() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](07_others_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n* To reorder factor levels according to their frequency, we use the function `fct_infreq()`.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\nWe may want to order the factors using their frequency. The most frequent appears first.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n    data = df,\n    aes(x=fct_infreq(quality), y=alcohol)\n) +\n  geom_boxplot() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](07_others_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n* To combine levels into broader categories, we use the function `fct_collapse()`.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\nIf we think that $6$ categories is to much for the quality of the wine, we can change the category to be `low`, `average` and `good`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n    data = df,\n    aes(\n        x=fct_collapse(\n            quality,\n            low = c(\"3\", \"4\"),\n            average = c(\"5\", \"6\"),\n            good = c(\"7\", \"8\")\n        ),\n        y=alcohol\n    )\n) +\n  geom_boxplot() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](07_others_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n## The `lubridate` package\n\nThe `lubridate` package offers a powerful suite of tools for handling date and time data in R. It simplifies tasks such as parsing, extracting, and manipulating temporal information.\n\nUsually, the first operation to do is to convert character string into a Date object using the `ymd()` function.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoday <- ymd(\"2023-09-21\")\n```\n:::\n\n\n\n:::\n\nWe can then extract the day, month and year of the date using the function `day()`, `month()` and `year()` respectively.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nday(today)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] 21\n```\n\n\n:::\n\n```{.r .cell-code}\nmonth(today)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] 9\n```\n\n\n:::\n\n```{.r .cell-code}\nyear(today)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] 2023\n```\n\n\n:::\n:::\n\n\n\n:::\n\nAdditionally, arithmetic operations are implemented to efficiently calculate dates.\n\n::: {.callout-note appearance=\"simple\"}\n\n## Example\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnext_course <- today + days(7)\nnext_course\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{.outputcode}\n[1] \"2023-09-28\"\n```\n\n\n:::\n:::\n\n\n\n:::\n\n\n## Other (other) packages\n\nUp to now, we have seen all the core `tidyverse` packages, but other packages are also installed with `tidyverse`. We may cite `hms` to manipulate times, `jsonlite` to work with JSON files or `readxl` to work with Excel files. The complete list of the packages is on the `tidyverse` [website](https://tidyverse.tidyverse.org).\n\n## Additional resources\n\n* The `stringr` [website](https://stringr.tidyverse.org), [cheat sheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf).\n\n* The `forcats` [website](https://forcats.tidyverse.org), [cheat sheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/factors.pdf).\n\n* The `lubridate` [website](https://lubridate.tidyverse.org), [cheat sheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/lubridate.pdf).\n\n<br><br>\n\n::: {style=\"font-size: 0.875em;\"}\n[Back](/weeks/week-2.qmd) ‚èé\n:::",
    "supporting": [
      "07_others_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}